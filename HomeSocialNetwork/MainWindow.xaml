<Window x:Class="HomeSocialNetwork.MainWindow"
          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
          Title="HomeSocialNetwork"
          Height="700" Width="1000"
          WindowStyle="None"
          ResizeMode="NoResize"
          Background="DarkGray"
          AllowsTransparency="True" 
          FontFamily="Calibri"
        FontSize="14"
        BorderThickness="3"
        BorderBrush="Black"
        Margin="0,0,-4,0"
        MouseDown="UsersGrid_MouseDown" >
    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0.5,0" EndPoint="0.5,1">
                <GradientStop Color="#FF668C66" Offset="0.0"/>
                
                <GradientStop Color="Tan" Offset="0.7"/>
                
                <GradientStop Color="#FF668C66" Offset="1.0"/>
            </LinearGradientBrush>
        </Grid.Background>
        <Grid.RowDefinitions>
            <RowDefinition Height="40" />
            <!-- Шапка -->
            <RowDefinition Height="190"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="30"/>
            <RowDefinition Height="180"/>
            <RowDefinition Height="40"/>
            <!-- Статус-бар -->
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="150"/>
            <ColumnDefinition Width="700"/>
            <ColumnDefinition Width="100"/>
            <ColumnDefinition Width="40"/>
        </Grid.ColumnDefinitions>
        <!-- 1. Шапка (строка 0) -->
        <Border Grid.Row="0"
                Grid.ColumnSpan="4"               
                Margin="15,0,-4,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="40" />
                </Grid.ColumnDefinitions>
                <!-- Логотип и название -->
                <StackPanel Grid.Column="0"
                            Orientation="Horizontal" 
                            VerticalAlignment="Center">
                    <TextBlock Text="HomeSocialNetwork" 
                               FontSize="20" FontFamily="Arial
                               Rounded MT Bold" 
                               Foreground="White"/>
                </StackPanel>
                <!-- Кнопка закрытия -->
                <Button Grid.Column="3"
                        Content="×"
                        Width="38"
                        Height="38"                                              
                        FontWeight="Bold"
                        FontSize="24"
                        Click="CloseButton_Click"
                        Background="#004E594E"
                        BorderThickness="0"/>
            </Grid>
        </Border>
        <!-- LogPanel: панель для отображения логов -->
        <Grid x:Name="LogPanel" 
              Grid.Row="1"
              Grid.Column="1"
              Grid.ColumnSpan="2"
              Margin="5,5,5,5" 
              Background="#FF312E2E">
            <Grid.ColumnDefinitions>
            </Grid.ColumnDefinitions>
            <ScrollViewer Grid.Row="1"
                          Grid.Column="1"
                          Grid.ColumnSpan="4"
                          VerticalScrollBarVisibility="Auto"                 
                          Padding="5">
                <TextBlock x:Name="LogDisplay"
                       TextWrapping="Wrap"          
                       FontSize="16"                
                       Foreground="LimeGreen"      
                       Background="#FF1B1F1F"        
                       Margin="5,5,5,5"/>
            </ScrollViewer>
        </Grid>
        <!-- 2. Меню (столбец 0, строки 1–3) -->
        <StackPanel Grid.Row="1"
                    Grid.RowSpan="3"
                    Grid.Column="0"
                    Margin="5,5,5,5"
                    Orientation="Vertical">
            <Button Content="Menu"
                    Height="45" 
                    FontWeight="Bold" 
                    Background= 
                    "#00465445" />
            <Button Content="Добавить"
                    Height="45" FontWeight="Bold"                    
                    Background="#00465445"
                    Click ="AddUser_Click"/>
            <Button Content="Найти"
                    Height="45"
                    FontWeight="Bold"                     
                    Background="#00465445"
                    
                    Click="FindUser_Click"/>
            <Button Content="Обновить"
                    Height="45"                  
                    Background="#00465445"
                    Click="Refresh_Click" FontWeight="Bold"/>
        </StackPanel>
        <!-- 3. Основная область (столбец 1, строка 1) -->
                               
        <ScrollViewer Grid.Row="4"
                      Grid.Column="0"
                      Grid.ColumnSpan="4"
                      VerticalScrollBarVisibility="Auto"                 
                      Padding="5">
            <Grid>
                <!-- Определяем две строки -->
                <Grid.RowDefinitions>
                    <RowDefinition Height="40"/>
                    <!-- Заголовки (фиксированная высота) -->
                    <RowDefinition Height="*"/>
                    <!-- Данные (заполняют остальное пространство) -->
                </Grid.RowDefinitions>

                <!-- 1. Верхний ряд: заголовки колонок -->
                <Grid Grid.Row="0" Margin="1">
                    <Grid.Resources>
                        <Style TargetType="TextBlock">
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="FontSize" Value="16"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                        </Style>
                    </Grid.Resources>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="50"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="ID" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="1" Text="Имя" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="2" Text="Фамилия" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="3" Text="Телефон" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="4" Text="Email" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="5" Text="Пароль" FontWeight="Bold" VerticalAlignment="Center"/>
                    <TextBlock Grid.Column="6" Text="Дата создания" FontWeight="Bold" VerticalAlignment="Center"/>
                </Grid>
              
                        <ItemsControl 
                         Grid.Row="1"
                         ItemsSource="{Binding Users}"
                         VerticalAlignment="Top"
                         HorizontalAlignment="Stretch">
                    <ItemsControl.Resources>
                        <Style x:Key="BorderedContentStyle" TargetType="ContentControl">
                             <Setter Property="HorizontalAlignment" Value="Stretch"/>
                               <Setter Property="Template">
                                   <Setter.Value>
                                        <ControlTemplate TargetType="ContentControl">
                                            <Border BorderThickness="1"
                                                     BorderBrush="Black"                                           
                                                     Padding="2"
                                                     HorizontalAlignment="{TemplateBinding HorizontalAlignment}">
                                                    <TextBlock   Text="{Binding Content, RelativeSource={RelativeSource TemplatedParent}, StringFormat={}{0}}"
                                                     VerticalAlignment="Center"
                                                     HorizontalAlignment="Left"
                                                     FontSize="14" FontWeight="Bold"/>
                                            </Border>
                                        </ControlTemplate>
                                   </Setter.Value>
                               </Setter>
                          </Style>
                    </ItemsControl.Resources>
                    <ItemsControl.ItemTemplate>
                        
                        <DataTemplate>
                            <DataTemplate.Resources>
                                <Style TargetType="TextBlock">
                                    <Setter Property="FontWeight" Value="Bold"/>
                                    <Setter Property="FontSize" Value="16"/>
                                </Style>
                            </DataTemplate.Resources>
                            <Grid Margin="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="50"/>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <ContentControl
                                 Grid.Column="0"
                                 Content="{Binding Id}"
                                 Style="{StaticResource BorderedContentStyle}"
                                 HorizontalAlignment="Stretch"/>
                                <ContentControl
                                Grid.Column="1"
                                Content="{Binding FirstName}"
                                Style="{StaticResource BorderedContentStyle}"
                                HorizontalAlignment="Stretch"/>

                                <ContentControl
                                Grid.Column="2"
                                Content="{Binding LastName}"
                                Style="{StaticResource BorderedContentStyle}"
                                HorizontalAlignment="Stretch"/>

                                <ContentControl
                                 Grid.Column="3"
                                 Content="{Binding PhoneNumber}"
                                 Style="{StaticResource BorderedContentStyle}"
                                 HorizontalAlignment="Stretch"/>

                                <ContentControl
                                 Grid.Column="4"
                                 Content="{Binding Email}"
                                 Style="{StaticResource BorderedContentStyle}"
                                 HorizontalAlignment="Stretch"/>
                                                                <ContentControl
                                 Grid.Column="5"
                                 Content="{Binding Password}"
                                 Style="{StaticResource BorderedContentStyle}"
                                 HorizontalAlignment="Stretch"/>
                                <ContentControl
                                 Grid.Column="6"                                                                    
                                 Content="{Binding CreatedAt,  StringFormat={}{0:dd.MM.yyyy HH:mm:ss}}"             
                                 Style="{StaticResource BorderedContentStyle}"                               
                                 HorizontalAlignment="Stretch"/>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Grid>

        </ScrollViewer>

        <!-- 5. Статус-бар (строка 4, весь width) -->
        <StatusBar Grid.Row="5"
                   Grid.ColumnSpan="4"                   
                   FontSize="14"
                   Background="#00C3D1C3" Margin="0,0,-4,0">
            <TextBlock Name="StatusText"
                       Text="Готов"
                       FontWeight="Bold"/>
        </StatusBar>
    </Grid>
</Window>



